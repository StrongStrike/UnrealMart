{"ast":null,"code":"// src/context/SettingsContext.js\nimport{createContext,useContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const defaultSettings={sound:true,magnetic:true,ai:true,theme:'dark',animations:true};const SettingsContext=/*#__PURE__*/createContext();export function SettingsProvider(_ref){let{children}=_ref;const[settings,setSettings]=useState(defaultSettings);useEffect(()=>{const saved=localStorage.getItem('unreal-settings');if(saved)setSettings(JSON.parse(saved));},[]);useEffect(()=>{localStorage.setItem('unreal-settings',JSON.stringify(settings));// ✅ Применяем тему надёжно\nconst root=document.documentElement;if(settings.theme==='dark'){root.classList.add('dark');root.classList.remove('light');document.body.style.backgroundColor='#000';}else{root.classList.remove('dark');root.classList.add('light');document.body.style.backgroundColor='#f3f3f3';}},[settings]);const toggle=key=>{setSettings(prev=>({...prev,[key]:key==='theme'?prev[key]==='dark'?'light':'dark':!prev[key]}));};return/*#__PURE__*/_jsx(SettingsContext.Provider,{value:{settings,toggle},children:children});}export const useSettings=()=>useContext(SettingsContext);","map":{"version":3,"names":["createContext","useContext","useEffect","useState","jsx","_jsx","defaultSettings","sound","magnetic","ai","theme","animations","SettingsContext","SettingsProvider","_ref","children","settings","setSettings","saved","localStorage","getItem","JSON","parse","setItem","stringify","root","document","documentElement","classList","add","remove","body","style","backgroundColor","toggle","key","prev","Provider","value","useSettings"],"sources":["E:/my-projects/UnrealMart/unrealmart/src/context/SettingsContext.js"],"sourcesContent":["// src/context/SettingsContext.js\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\n\r\nconst defaultSettings = {\r\n\tsound: true,\r\n\tmagnetic: true,\r\n\tai: true,\r\n\ttheme: 'dark',\r\n\tanimations: true,\r\n}\r\n\r\nconst SettingsContext = createContext()\r\n\r\nexport function SettingsProvider({ children }) {\r\n\tconst [settings, setSettings] = useState(defaultSettings)\r\n\r\n\tuseEffect(() => {\r\n\t\tconst saved = localStorage.getItem('unreal-settings')\r\n\t\tif (saved) setSettings(JSON.parse(saved))\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('unreal-settings', JSON.stringify(settings))\r\n\r\n\t\t// ✅ Применяем тему надёжно\r\n\t\tconst root = document.documentElement\r\n\t\tif (settings.theme === 'dark') {\r\n\t\t\troot.classList.add('dark')\r\n\t\t\troot.classList.remove('light')\r\n\t\t\tdocument.body.style.backgroundColor = '#000'\r\n\t\t} else {\r\n\t\t\troot.classList.remove('dark')\r\n\t\t\troot.classList.add('light')\r\n\t\t\tdocument.body.style.backgroundColor = '#f3f3f3'\r\n\t\t}\r\n\t}, [settings])\r\n\r\n\r\n\tconst toggle = key => {\r\n\t\tsetSettings(prev => ({\r\n\t\t\t...prev,\r\n\t\t\t[key]:\r\n\t\t\t\tkey === 'theme'\r\n\t\t\t\t\t? prev[key] === 'dark'\r\n\t\t\t\t\t\t? 'light'\r\n\t\t\t\t\t\t: 'dark'\r\n\t\t\t\t\t: !prev[key],\r\n\t\t}))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SettingsContext.Provider value={{ settings, toggle }}>\r\n\t\t\t{children}\r\n\t\t</SettingsContext.Provider>\r\n\t)\r\n}\r\n\r\nexport const useSettings = () => useContext(SettingsContext)\r\n"],"mappings":"AAAA;AACA,OAASA,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,QAAAC,GAAA,IAAAC,IAAA,yBAEtE,KAAM,CAAAC,eAAe,CAAG,CACvBC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,IAAI,CACdC,EAAE,CAAE,IAAI,CACRC,KAAK,CAAE,MAAM,CACbC,UAAU,CAAE,IACb,CAAC,CAED,KAAM,CAAAC,eAAe,cAAGZ,aAAa,CAAC,CAAC,CAEvC,MAAO,SAAS,CAAAa,gBAAgBA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC5C,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAACG,eAAe,CAAC,CAEzDJ,SAAS,CAAC,IAAM,CACf,KAAM,CAAAgB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CACrD,GAAIF,KAAK,CAAED,WAAW,CAACI,IAAI,CAACC,KAAK,CAACJ,KAAK,CAAC,CAAC,CAC1C,CAAC,CAAE,EAAE,CAAC,CAENhB,SAAS,CAAC,IAAM,CACfiB,YAAY,CAACI,OAAO,CAAC,iBAAiB,CAAEF,IAAI,CAACG,SAAS,CAACR,QAAQ,CAAC,CAAC,CAEjE;AACA,KAAM,CAAAS,IAAI,CAAGC,QAAQ,CAACC,eAAe,CACrC,GAAIX,QAAQ,CAACN,KAAK,GAAK,MAAM,CAAE,CAC9Be,IAAI,CAACG,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC,CAC1BJ,IAAI,CAACG,SAAS,CAACE,MAAM,CAAC,OAAO,CAAC,CAC9BJ,QAAQ,CAACK,IAAI,CAACC,KAAK,CAACC,eAAe,CAAG,MAAM,CAC7C,CAAC,IAAM,CACNR,IAAI,CAACG,SAAS,CAACE,MAAM,CAAC,MAAM,CAAC,CAC7BL,IAAI,CAACG,SAAS,CAACC,GAAG,CAAC,OAAO,CAAC,CAC3BH,QAAQ,CAACK,IAAI,CAACC,KAAK,CAACC,eAAe,CAAG,SAAS,CAChD,CACD,CAAC,CAAE,CAACjB,QAAQ,CAAC,CAAC,CAGd,KAAM,CAAAkB,MAAM,CAAGC,GAAG,EAAI,CACrBlB,WAAW,CAACmB,IAAI,GAAK,CACpB,GAAGA,IAAI,CACP,CAACD,GAAG,EACHA,GAAG,GAAK,OAAO,CACZC,IAAI,CAACD,GAAG,CAAC,GAAK,MAAM,CACnB,OAAO,CACP,MAAM,CACP,CAACC,IAAI,CAACD,GAAG,CACd,CAAC,CAAC,CAAC,CACJ,CAAC,CAED,mBACC9B,IAAA,CAACO,eAAe,CAACyB,QAAQ,EAACC,KAAK,CAAE,CAAEtB,QAAQ,CAAEkB,MAAO,CAAE,CAAAnB,QAAA,CACpDA,QAAQ,CACgB,CAAC,CAE7B,CAEA,MAAO,MAAM,CAAAwB,WAAW,CAAGA,CAAA,GAAMtC,UAAU,CAACW,eAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}